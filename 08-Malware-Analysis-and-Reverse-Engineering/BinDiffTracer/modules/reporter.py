import yaml, json

def generate_report(diffs):
    with open("configs/config.yaml") as f:
        cfg = yaml.safe_load(f)

    json_path = cfg["report"]["json_output"]
    html_path = cfg["report"]["html_output"]

    with open(json_path, "w") as jf:
        json.dump(diffs, jf, indent=2)

    with open(html_path, "w") as hf:
        hf.write("<html><body><h1>BinDiffTracer Diff Report</h1><ul>")
        for d in diffs:
            hf.write("<li>")
            hf.write(f"<b>Index:</b> {d['index']}<br>")
            hf.write(f"<b>Old:</b> {d.get('old')}<br>")
            hf.write(f"<b>New:</b> {d.get('new')}<br>")
            hf.write("</li><hr>")
        hf.write("</ul></body></html>")
