# AutoPersistenceKit

AutoPersistenceKit is a cross-platform persistence mechanism automation framework that allows red teamers, malware analysts, or system administrators to **programmatically install and remove persistence mechanisms** on Windows, Linux, and macOS. It intelligently detects the host environment and applies the stealthiest supported method to achieve startup persistence. All actions are reversible and logged.

This tool is ideal for:

* Red team operators needing reliable persistence setup
* Blue teams testing defensive coverage for persistence techniques
* Malware researchers analyzing platform-specific behaviors

---

## Features

* **Automatic platform detection** (Windows, Linux, macOS)
* **Persistence installation** via:

  * Windows: Registry Run key
  * Linux: Cron job (`@reboot`)
  * macOS: Launch Agent plist
* **Clean removal** of installed persistence
* **Verbose logging** to `output/persistence_log.txt`
* **Modular architecture** for extension
* **Unit tests included**

---

## Folder Structure

```
AutoPersistenceKit/
├── main.py                    # CLI entry point
├── config.py                  # Config placeholder
├── requirements.txt           # Dependencies
├── output/
│   └── persistence_log.txt    # Log output
│
├── modules/
│   ├── installer.py           # OS-based installer
│   └── remover.py             # OS-based remover
│
├── platforms/
│   ├── windows_persist.py     # Windows registry logic
│   ├── linux_persist.py       # Crontab logic
│   └── macos_persist.py       # LaunchAgent logic
│
├── tests/
│   ├── test_detector.py       # Platform detection
│   ├── test_installer.py      # Installer test (skipped on non-Windows)
│   └── test_remover.py        # Remover test (skipped on non-Windows)
├── screenshots/
│   └── persistence_installed.png  # Screenshot example
```

---

## Setup

```bash
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

---

## Usage

### Install persistence

Installs platform-appropriate startup persistence:

```bash
python3 main.py --action install --verbose
```

### Remove persistence

Cleans up any previously installed persistence:

```bash
python3 main.py --action remove --verbose
```

---

## Testing

All tests are available in the `tests/` directory.
Run with:

```bash
python3 -m unittest discover tests
```

Expected output on Linux/macOS:

```
.ss
----------------------------------------------------------------------
Ran 3 tests in 0.000s

OK (skipped=2)
```

> Windows-specific tests are skipped when not on a Windows platform.

---

## Screenshot

Below is an example of the tool confirming installation of persistence:

![persistence\_installed](screenshots/persistence_installed.png)

---

## Author

Created by **mchyasn**

---

## License

MIT License
